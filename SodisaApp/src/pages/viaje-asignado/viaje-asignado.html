<!--
  Generated template for the ViajeAsignado page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Viajes Asignados</ion-title>
  </ion-navbar>
  <ion-toolbar>
    <ion-title>{{nombre}} <br> Eco:{{economico}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-fab top right edge>
    <button ion-fab mini (click)="obtieneViajesAsignados()"><ion-icon name="sync"></ion-icon></button>
  </ion-fab>

  <!--<ion-card *ngFor="let viaje of pListaViajeMovil; let i = index">-->
  <ion-card *ngFor="let viaje of listaViajesLocales; let i = index">
    <ion-item>
      <!--<ion-icon name="locate" item-left large (click)="EnviaMapa()"></ion-icon>-->
      <h2>Concentrado: {{viaje.idConcentrado}}</h2>
      <p>Origen: {{viaje.idOrigen}} - {{viaje.origenNombre}} <br> Destino: {{viaje.destino}}</p>
      <ion-grid>
        <ion-row>
          <ion-col width-50>
            <button *ngIf="viaje.idEstatus == 2" ion-button icon-only color="primary" outline icon-left (click)="AceptaViaje(viaje.idViaje, viaje.idOrigen, viaje.idConcentrado, i)">
        Aceptar
        <ion-icon name="checkbox-outline"></ion-icon>
      </button>

            <button *ngIf="viaje.idEstatus == 3" ion-button icon-only color="secondary" outline icon-left (click)="IniciarViaje(viaje.idViaje, viaje.idOrigen, viaje.idConcentrado, i)">
        Iniciar Viaje
        <ion-icon name="play"></ion-icon>
      </button>

            <button *ngIf="viaje.idEstatus == 5" ion-button icon-only color="dark" outline icon-left (click)="TerminarViaje(viaje.idViaje, viaje.idOrigen, viaje.idConcentrado, i)">
        Terminar Viaje
        <ion-icon name="square"></ion-icon>
      </button>
          </ion-col>
          <ion-col width-50>
            <button *ngIf="viaje.idEstatus == 2" ion-button icon-only color="danger" outline icon-left (click)="muestraMotivos(viaje.idViaje, viaje.idOrigen, viaje.idConcentrado, i)">
        Rechazar
        <ion-icon name="close-circle"></ion-icon>
      </button>
          </ion-col>
        </ion-row>
        <ion-row>
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-card>
</ion-content>